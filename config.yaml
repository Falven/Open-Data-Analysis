# This file can update the JupyterHub Helm chart's default configuration values.
#
# For reference see the configuration reference and default values, but make
# sure to refer to the Helm chart version of interest to you!
#
# Introduction to YAML:     https://www.youtube.com/watch?v=cdLNKUoMc6c
# Chart config reference:   https://zero-to-jupyterhub.readthedocs.io/en/stable/resources/reference.html
# Chart default values:     https://github.com/jupyterhub/zero-to-jupyterhub-k8s/blob/HEAD/jupyterhub/values.yaml
# Available chart versions: https://hub.jupyter.org/helm-chart/
#
hub:
  services:
    myapi:
      name: myapi
      api_token: mytoken
    jupyterhub-idle-culler-service:
      name: jupyterhub-idle-culler-service
      command:
        - 'python3'
        - '-m'
        - 'jupyterhub_idle_culler'
        - '--timeout=3600' # Cull after 1 hour of inactivity
        - '--cull-users'
        - '--api-page-size=200'
  loadRoles:
    jupyterhub-idle-culler-role:
      description: 'Cull idle single-user servers'
      scopes:
        - 'list:users'
        - 'read:users:activity'
        - 'read:servers'
        - 'delete:servers'
        - 'admin:users'
      services: ['jupyterhub-idle-culler-service']
    myapi:
      description: 'My API'
      scopes: [admin]
imagePullSecrets:
  - name: cr-myacr
singleuser:
  image:
    name: myacr.azurecr.io/interpreter
    tag: latest
